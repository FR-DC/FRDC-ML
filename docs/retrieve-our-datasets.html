<!DOCTYPE html SYSTEM "about:legacy-compat"><html lang="en-US" data-colors-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex">  <meta name="built-on" content="2023-12-11T17:31:22.021761"><meta name="build-number" content="${buildNumber}">       <title>Retrieve our Datasets | Documentation</title><script id="virtual-toc-data" type="application/json">[{"id":"prerequisites","level":0,"title":"Prerequisites","anchor":"#prerequisites"},{"id":"retrieve-the-data","level":0,"title":"Retrieve the Data","anchor":"#retrieve-the-data"},{"id":"segment-the-data","level":0,"title":"Segment the Data","anchor":"#segment-the-data"},{"id":"plot-the-data-optional","level":0,"title":"Plot the Data (Optional)","anchor":"#plot-the-data-optional"}]</script><script id="topic-shortcuts" type="application/json"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.css" rel="stylesheet">   <link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><link rel="manifest" href="https://jetbrains.com/site.webmanifest"><link rel="mask-icon" href="https://jetbrains.com/safari-pinned-tab.svg" color="#000000"><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"/><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"/><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"/><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"/><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"/>  <meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Retrieve our Datasets | Documentation"/><meta property="og:description" content=""/><meta property="og:image" content=""/><meta property="og:site_name" content="Documentation Help"/><meta property="og:type" content="website"/><meta property="og:locale" content="en_US"/><meta property="og:url" content="/d/0.0.4/retrieve-our-datasets.html"/><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Retrieve our Datasets | Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json"> { "@context": "http://schema.org", "@type": "WebPage", "@id": "/d/0.0.4/retrieve-our-datasets.html#webpage", "url": "/d/0.0.4/retrieve-our-datasets.html", "name": "Retrieve our Datasets | Documentation", "description": "", "image": "", "inLanguage":"en-US" }</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json"> { "@type": "WebSite", "@id": "/d/#website", "url": "/d/", "name": "Documentation Help" }</script><!-- End Schema.org --></head>      <body data-id="Retrieve-our-Datasets" data-main-title="Retrieve our Datasets" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}"  data-template="article"  data-breadcrumbs="Tutorials"  >   <div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Documentation 0.0.4 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Retrieve-our-Datasets"   id="Retrieve-our-Datasets.md">Retrieve our Datasets</h1> <div class="micro-format" data-content="{&quot;microFormat&quot;:[&quot;\u003cp id\u003d\&quot;d077c2de_707\&quot;\u003eA tutorial to retrieve our datasets\u003c/p\u003e&quot;]}"></div> <p id="d077c2de_618">In this tutorial, we'll learn how to :</p><ul class="list _ul" id="d077c2de_619"><li class="list__item" id="d077c2de_620"><p>Retrieve FRDC's Hyperspectral Image Data as <code class="code" id="d077c2de_621">np.ndarray</code></p></li><li class="list__item" id="d077c2de_622"><p>Retrieve FRDC's Ground Truth bounds and labels</p></li><li class="list__item" id="d077c2de_623"><p>Slice/segment the image data by the bounds</p></li></ul><section class="chapter"><h2 id="prerequisites" data-toc="prerequisites"   >Prerequisites</h2><ul class="list _ul" id="d077c2de_624"><li class="list__item" id="d077c2de_625"><p>New here? <a href="getting-started.html" id="d077c2de_626" data-tooltip="Before starting development, take a look at our repository structure. This will help you understand where to put your code."  >Get Started</a>.</p></li><li class="list__item" id="d077c2de_627"><p>Setup the Google Cloud Authorization to download the data.</p></li></ul></section><section class="chapter"><h2 id="retrieve-the-data" data-toc="retrieve-the-data"   >Retrieve the Data</h2><p id="d077c2de_628">To retrieve the data, use <a href="load-dataset.html#frdcdataset" id="d077c2de_629" data-tooltip="Initializes the dataset. This doesn't immediately download the dataset, but only when you call the get_* functions. The site, date, version must match the dataset path on GCS. For example if the dataset is at gs://frdc-scan/my-site/20201218/90deg/map, site='my-site' date='20201218'&hellip;"  >FRDCDataset</a></p><p id="d077c2de_630">Here, we'll download and load our</p><ul class="list _ul" id="d077c2de_631"><li class="list__item" id="d077c2de_632"><p><code class="code" id="d077c2de_633">ar</code>: Hyperspectral Image Data</p></li><li class="list__item" id="d077c2de_634"><p><code class="code" id="d077c2de_635">order</code>: The order of the bands</p></li><li class="list__item" id="d077c2de_636"><p><code class="code" id="d077c2de_637">bounds</code>: The bounds of the trees (segments)</p></li><li class="list__item" id="d077c2de_638"><p><code class="code" id="d077c2de_639">labels</code>: The labels of the trees (segments)</p></li></ul><div class="code-block" data-lang="python"         >
from frdc.load.dataset import FRDCDataset

ds = FRDCDataset(site=&quot;chestnut_nature_park&quot;, date=&quot;20201218&quot;, version=None)
ar, order = ds.get_ar_bands()
bounds, labels = ds.get_bounds_and_labels()
</div><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="what-datasets-are-there" data-toc="what-datasets-are-there"   >What Datasets are there?</h3></div><div class="collapse__content"><aside class="prompt" data-type="tip" data-title="" id="d077c2de_641"><p id="d077c2de_642">To know what datasets are available, you can run <a href="load-dataset.html" id="d077c2de_643" data-tooltip="You need to Set-Up Google Cloud with the appropriate permissions to use this library."  >gcs.utils</a>'s <code class="code" id="d077c2de_644">list_gcs_datasets()</code> method</p></aside><aside class="prompt" data-type="warning" data-title="" id="d077c2de_645"><p id="d077c2de_646">Note that some datasets do not have <code class="code" id="d077c2de_647">bounds</code> and <code class="code" id="d077c2de_648">labels</code> available as they have not been annotated yet.</p></aside><div class="code-block" data-lang="python"         >
from frdc.load.gcs import list_gcs_datasets 
print(list_gcs_datasets())
# 0  DEBUG/0
# 1  casuarina/20220418/183deg
# 2  casuarina/20220418/93deg
# 3  chestnut_nature_park/20201218
# ...
</div><ul class="list _ul" id="d077c2de_650"><li class="list__item" id="d077c2de_651"><p>The first part of the path is the <code class="code" id="d077c2de_652">site</code>, and the second part is the <code class="code" id="d077c2de_653">date</code>.</p></li><li class="list__item" id="d077c2de_654"><p>The <code class="code" id="d077c2de_655">version</code> is the rest of the path, if there isn't any, use <code class="code" id="d077c2de_656">None</code>.</p></li></ul><div class="tabs" id="d077c2de_657"><div class="tabs__content" data-gtm="tab" id="d077c2de_658" data-title="ds/date/ver/"><ul class="list _ul" id="d077c2de_659"><li class="list__item" id="d077c2de_660"><p><code class="code" id="d077c2de_661">site=&quot;ds&quot;</code></p></li><li class="list__item" id="d077c2de_662"><p><code class="code" id="d077c2de_663">date=&quot;date&quot;</code></p></li><li class="list__item" id="d077c2de_664"><p><code class="code" id="d077c2de_665">version=&quot;ver&quot;</code></p></li></ul></div><div class="tabs__content" data-gtm="tab" id="d077c2de_666" data-title="ds/date/ver/01/data/"><ul class="list _ul" id="d077c2de_667"><li class="list__item" id="d077c2de_668"><p><code class="code" id="d077c2de_669">site=&quot;ds&quot;</code></p></li><li class="list__item" id="d077c2de_670"><p><code class="code" id="d077c2de_671">date=&quot;date&quot;</code></p></li><li class="list__item" id="d077c2de_672"><p><code class="code" id="d077c2de_673">version=&quot;ver/01/data&quot;</code></p></li></ul></div><div class="tabs__content" data-gtm="tab" id="d077c2de_674" data-title="ds/date/"><ul class="list _ul" id="d077c2de_675"><li class="list__item" id="d077c2de_676"><p><code class="code" id="d077c2de_677">site=&quot;ds&quot;</code></p></li><li class="list__item" id="d077c2de_678"><p><code class="code" id="d077c2de_679">date=&quot;date&quot;</code></p></li><li class="list__item" id="d077c2de_680"><p><code class="code" id="d077c2de_681">version=None</code></p></li></ul></div></div></div></div></section></section><section class="chapter"><h2 id="segment-the-data" data-toc="segment-the-data"   >Segment the Data</h2><p id="d077c2de_682">To segment the data, use <a href="preprocessing-extract-segments.html" id="d077c2de_683" data-tooltip="A boundary is a Rect object that represents the minimum bounding box of a segment, with x0, y0, x1, y1 coordinates."  >Extract Segments</a>.</p><p id="d077c2de_684">Here, we'll segment the data by the bounds.</p><div class="code-block" data-lang="python"         >
from frdc.load.dataset import FRDCDataset
from frdc.preprocess.extract_segments import extract_segments_from_bounds

ds = FRDCDataset(site=&quot;chestnut_nature_park&quot;, date=&quot;20201218&quot;, version=None)
ar, order = ds.get_ar_bands()
bounds, labels = ds.get_bounds_and_labels()
segments = extract_segments_from_bounds(ar, bounds)
</div><p id="d077c2de_686"><code class="code" id="d077c2de_687">segments</code> is a list of <code class="code" id="d077c2de_688">np.ndarray</code> of shape H, W, C, representing a tree. The order of <code class="code" id="d077c2de_689">segments</code> is the same as <code class="code" id="d077c2de_690">labels</code>, so you can use <code class="code" id="d077c2de_691">labels</code> to identify the tree.</p><aside class="prompt" data-type="tip" data-title="" id="d077c2de_692"><p id="d077c2de_693">While we have not used <code class="code" id="d077c2de_694">order</code> in our example, it's useful to determine the order of the bands in <code class="code" id="d077c2de_695">ar</code> in other applications.</p></aside></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h2 id="plot-the-data-optional" data-toc="plot-the-data-optional"   >Plot the Data (Optional)</h2></div><div class="collapse__content"><p id="d077c2de_696">We can then use these data to plot out the first tree segment.</p><div class="code-block" data-lang="python"         >
import matplotlib.pyplot as plt

from frdc.load.dataset import FRDCDataset
from frdc.preprocess.extract_segments import extract_segments_from_bounds
from frdc.preprocess.scale import scale_0_1_per_band

ds = FRDCDataset(site=&quot;chestnut_nature_park&quot;, date=&quot;20201218&quot;, version=None)
ar, order = ds.get_ar_bands()
bounds, labels = ds.get_bounds_and_labels()
segments = extract_segments_from_bounds(ar, bounds)
segment_0_bgr = segments[0]
segment_0_rgb = segment_0_bgr[..., [2, 1, 0]]
segment_0_rgb_scaled = scale_0_1_per_band(segment_0_rgb)

plt.imshow(segment_0_rgb_scaled)
plt.title(f&quot;Tree {labels[0]}&quot;)
plt.show()
</div><p id="d077c2de_698">See also: <a href="preprocessing-scale.html" id="d077c2de_699" data-tooltip="The static scaling has a default config, which was inferred by our capturing device."  >preprocessing.scale.scale_0_1_per_band</a></p><p id="d077c2de_700">MatPlotLib cannot show the data correctly as-is, so we need to</p><ul class="list _ul" id="d077c2de_701"><li class="list__item" id="d077c2de_702"><p>Convert the data from BGR to RGB</p></li><li class="list__item" id="d077c2de_703"><p>Scale the data to 0-1 per band</p></li></ul><aside class="prompt" data-type="note" data-title="" id="d077c2de_704"><p id="d077c2de_705">Remember that the library returns the band <code class="code" id="d077c2de_706">order</code>? This is useful in debugging the data. If we had shown it in BGR, it'll look off!</p></aside></div></div></section><div class="last-modified"> Last modified: 11 December 2023</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom">  <a class="navigation-links__prev" href="getting-started.html">Getting Started</a>   <a class="navigation-links__next" href="model-test-chestnut-may-dec.html">Model Test Chestnut May-Dec</a>  </div></article><div id="disqus_thread"></div></div></section></main></div>  <script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b205/app.js"></script></body></html>